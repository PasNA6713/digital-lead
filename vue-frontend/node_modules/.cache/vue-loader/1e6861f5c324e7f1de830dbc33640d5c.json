{"remainingRequest":"C:\\Users\\John-\\Projects\\Frontend\\VueProjects\\spb-alert-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\John-\\Projects\\Frontend\\VueProjects\\spb-alert-system\\src\\components\\Map.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\John-\\Projects\\Frontend\\VueProjects\\spb-alert-system\\src\\components\\Map.vue","mtime":1605329409802},{"path":"C:\\Users\\John-\\Projects\\Frontend\\VueProjects\\spb-alert-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\John-\\Projects\\Frontend\\VueProjects\\spb-alert-system\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\John-\\Projects\\Frontend\\VueProjects\\spb-alert-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\John-\\Projects\\Frontend\\VueProjects\\spb-alert-system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0ewogICAgZGF0YTogKCkgPT4gKHsKICAgICAgICBwbGFjZW1hcmtzOiB7CiAgICAgICAgICAgICJ0eXBlIjogIkZlYXR1cmVDb2xsZWN0aW9uIiwKICAgICAgICAgICAgImZlYXR1cmVzIjogWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdGZWF0dXJlJywKICAgICAgICAgICAgICAgICAgICBpZDogMywKICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeTogewogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnUG9pbnQnLAogICAgICAgICAgICAgICAgICAgICAgICBjb29yZGluYXRlczogWzU5LjksIDMwLjU1XQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgcHJvcGVydGllczogewogICAgICAgICAgICAgICAgICAgICAgICBoaW50Q29udGVudDogJ9Ch0L7QtNC10YDQttCw0L3QuNC1INCy0YHQv9C70YvQstCw0Y7RidC10Lkg0L/QvtC00YHQutCw0LfQutC4JywKICAgICAgICAgICAgICAgICAgICAgICAgYmFsbG9vbkNvbnRlbnQ6ICfQodC+0LTQtdGA0LbQsNC90LjQtSDQsdCw0LvRg9C90LAnCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHByZXNldDogImlzbGFuZHMjZG90SWNvbiIsCiAgICAgICAgICAgICAgICAgICAgICAgIGljb25Db2xvcjogImJsdWUiCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSAgIAogICAgICAgICAgICBdLAogICAgICAgIH0sCiAgICAgICAgbXlNYXA6IG51bGwsCiAgICAgICAgb2JqZWN0TWFuYWdlcjogbnVsbCwKCiAgICAgICAgbWVzc2FnZXM6IG51bGwsCiAgICAgICAgY2xhc3NpZmllcjogewogICAgICAgICAgICAxOiAneWVsbG93JywKICAgICAgICAgICAgMjogJ2JsdWUnLAogICAgICAgICAgICAzOiAncmVkJwogICAgICAgIH0sCiAgICAgICAgdGltZUZvck1hcDogZmFsc2UKICAgICAgICB9KSwKCiAgICBtZXRob2RzOiB7CiAgICAgICAgc2xlZXAobXMpIHsKICAgICAgICAgICAgbXMgKz0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICAgICAgICAgIHdoaWxlIChuZXcgRGF0ZSgpIDwgbXMpe30KICAgICAgICB9LAoKICAgIGNyZWF0ZWQoKSB7CiAgICAgICAgdGhpcy5tZXNzYWdlcyA9IFtdCiAgICAgICAgYXhpb3MKICAgICAgLmdldCgnaHR0cHM6Ly80NmM2MGE2OTY2MDkubmdyb2suaW8vbWVzc2FnZS9nZXQvJykKICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICB0aGlzLm1lc3NhZ2VzID0gcmVzcG9uc2UKCiAgICAgICAgICAgIGZvciAobGV0IGk9MDtpPHRoaXMubWVzc2FnZXMubGVuZ3RoO2krKyl7CiAgICAgICAgY29uc29sZS5sb2coImNpcmNsZSIpCiAgICAgICAgdGhpcy5wbGFjZW1hcmtzWyJmZWF0dXJlcyJdLnB1c2goewogICAgICAgIHR5cGU6ICdGZWF0dXJlJywKICAgICAgICBpZDogdGhpcy5tZXNzYWdlc1siZGF0YSJdW2ldWyJpZCJdLAogICAgICAgIGdlb21ldHJ5OiB7CiAgICAgICAgICAgIHR5cGU6ICdQb2ludCcsCiAgICAgICAgICAgIGNvb3JkaW5hdGVzOiBbdGhpcy5tZXNzYWdlc1siZGF0YSJdW2ldWyJhZGRyZXNzIl1bImxvbmd0aXR1ZGUiXSwgdGhpcy5tZXNzYWdlc1siZGF0YSJdW2ldWyJhZGRyZXNzIl1bImxhdGl0dWRlIl1dCiAgICAgICAgfSwKICAgICAgICBwcm9wZXJ0aWVzOiB7CiAgICAgICAgICAgIGhpbnRDb250ZW50OiB0aGlzLm1lc3NhZ2VzWyJkYXRhIl1baV1bImRhdGUiXSwKICAgICAgICAgICAgYmFsbG9vbkNvbnRlbnQ6IHRoaXMubWVzc2FnZXNbImRhdGEiXVtpXVsidGV4dCJdCiAgICAgICAgfSwKICAgICAgICBvcHRpb25zOiB7CiAgICAgICAgICAgIHByZXNldDogImlzbGFuZHMjZG90SWNvbiIsCiAgICAgICAgICAgIGljb25Db2xvcjogdGhpcy5jbGFzc2lmaWVyW3RoaXMubWVzc2FnZXNbImRhdGEiXVtpXVsiZGFuZ2VyX2xldmVsIl1dCiAgICAgICAgfQogICAgfSkKICAgIH0KICAgICAgICBjb25zb2xlLmxvZygieW0iKQogICAgICAgIHltYXBzLnJlYWR5KCgpID0+IHsKICAgICAgICAgICAgdGhpcy5teU1hcCA9IG5ldyB5bWFwcy5NYXAoIm1hcCIsIHsKICAgICAgICAgICAgICAgIGNlbnRlcjogWzU5LjkzNzAsIDMwLjMwODldLAogICAgICAgICAgICAgICAgem9vbTogMTAsCiAgICAgICAgICAgICAgICBjb250cm9sczogWyd6b29tQ29udHJvbCddLCAKICAgICAgICAgICAgICAgIGJlaGF2aW9yczogWydkcmFnJywgJ3Njcm9sbFpvb20nXQogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICBzZWFyY2hDb250cm9sUHJvdmlkZXI6ICd5YW5kZXgjc2VhcmNoJwogICAgICAgICAgICB9KQoKICAgICAgICAgICAgdGhpcy5vYmplY3RNYW5hZ2VyID0gbmV3IHltYXBzLk9iamVjdE1hbmFnZXIoewogICAgICAgICAgICAgICAgY2x1c3Rlcml6ZTogdHJ1ZSwKICAgICAgICAgICAgICAgIGdyaWRTaXplOiAzMiwKICAgICAgICAgICAgICAgIGNsdXN0ZXJEaXNhYmxlQ2xpY2tab29tOiB0cnVlCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIAogICAgICAgICAgICB0aGlzLm9iamVjdE1hbmFnZXIuY2x1c3RlcnMub3B0aW9ucy5zZXQoJ3ByZXNldCcsICdpc2xhbmRzI3JlZENsdXN0ZXJJY29ucycpCiAgICAgICAgICAgIHRoaXMub2JqZWN0TWFuYWdlci5hZGQodGhpcy5wbGFjZW1hcmtzKQoKCiAgICAgICAgICAgIHRoaXMubXlNYXAuZ2VvT2JqZWN0cy5hZGQodGhpcy5vYmplY3RNYW5hZ2VyKQoKCiAgICAgICAgICAgIHRoaXMubXlNYXAuZ2VvT2JqZWN0cy5ldmVudHMuYWRkKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0ID0gZS5nZXQoJ29iamVjdElkJyk7CgogICAgICAgICAgICAgICAgY29uc3QgY2x1c3RlciA9IHRoaXMub2JqZWN0TWFuYWdlci5jbHVzdGVycy5nZXRCeUlkKHRhcmdldCkKICAgICAgICAgICAgICAgIGlmIChjbHVzdGVyKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2JqZWN0cyA9IGNsdXN0ZXIucHJvcGVydGllcy5nZW9PYmplY3RzCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgICAgfQogICAgICAgICAgfSkKICAgIH0gICAKfQo="},{"version":3,"sources":["Map.vue"],"names":[],"mappings":";;;;;;;;;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Map.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div>\r\n        <br>\r\n        <div class=\"border primary-border\" id=\"map\"></div>\r\n        <br>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default{\r\n        data: () => ({\r\n            placemarks: {\r\n                \"type\": \"FeatureCollection\",\r\n                \"features\": [\r\n                    {\r\n                        type: 'Feature',\r\n                        id: 3,\r\n                        geometry: {\r\n                            type: 'Point',\r\n                            coordinates: [59.9, 30.55]\r\n                        },\r\n                        properties: {\r\n                            hintContent: 'Содержание всплывающей подсказки',\r\n                            balloonContent: 'Содержание балуна'\r\n                        },\r\n                        options: {\r\n                            preset: \"islands#dotIcon\",\r\n                            iconColor: \"blue\"\r\n                        }\r\n                    }   \r\n                ],\r\n            },\r\n            myMap: null,\r\n            objectManager: null,\r\n\r\n            messages: null,\r\n            classifier: {\r\n                1: 'yellow',\r\n                2: 'blue',\r\n                3: 'red'\r\n            },\r\n            timeForMap: false\r\n            }),\r\n\r\n        methods: {\r\n            sleep(ms) {\r\n                ms += new Date().getTime();\r\n                while (new Date() < ms){}\r\n            },\r\n    \r\n        created() {\r\n            this.messages = []\r\n            axios\r\n          .get('https://46c60a696609.ngrok.io/message/get/')\r\n          .then((response) => {\r\n              this.messages = response\r\n\r\n                for (let i=0;i<this.messages.length;i++){\r\n            console.log(\"circle\")\r\n            this.placemarks[\"features\"].push({\r\n            type: 'Feature',\r\n            id: this.messages[\"data\"][i][\"id\"],\r\n            geometry: {\r\n                type: 'Point',\r\n                coordinates: [this.messages[\"data\"][i][\"address\"][\"longtitude\"], this.messages[\"data\"][i][\"address\"][\"latitude\"]]\r\n            },\r\n            properties: {\r\n                hintContent: this.messages[\"data\"][i][\"date\"],\r\n                balloonContent: this.messages[\"data\"][i][\"text\"]\r\n            },\r\n            options: {\r\n                preset: \"islands#dotIcon\",\r\n                iconColor: this.classifier[this.messages[\"data\"][i][\"danger_level\"]]\r\n            }\r\n        })\r\n        }\r\n            console.log(\"ym\")\r\n            ymaps.ready(() => {\r\n                this.myMap = new ymaps.Map(\"map\", {\r\n                    center: [59.9370, 30.3089],\r\n                    zoom: 10,\r\n                    controls: ['zoomControl'], \r\n                    behaviors: ['drag', 'scrollZoom']\r\n                }, {\r\n                    searchControlProvider: 'yandex#search'\r\n                })\r\n\r\n                this.objectManager = new ymaps.ObjectManager({\r\n                    clusterize: true,\r\n                    gridSize: 32,\r\n                    clusterDisableClickZoom: true\r\n                })\r\n                \r\n                this.objectManager.clusters.options.set('preset', 'islands#redClusterIcons')\r\n                this.objectManager.add(this.placemarks)\r\n\r\n\r\n                this.myMap.geoObjects.add(this.objectManager)\r\n\r\n\r\n                this.myMap.geoObjects.events.add('click', function (e) {\r\n                    let target = e.get('objectId');\r\n\r\n                    const cluster = this.objectManager.clusters.getById(target)\r\n                    if (cluster) {\r\n                        const objects = cluster.properties.geoObjects\r\n                    }\r\n                })\r\n            })\r\n          }\r\n              })\r\n        }   \r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n#map{\r\n    width: 800px; \r\n    height: 600px;\r\n    margin-left: 50px;\r\n}\r\n</style>"]}]}