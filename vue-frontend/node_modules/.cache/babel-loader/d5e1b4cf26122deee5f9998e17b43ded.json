{"remainingRequest":"C:\\Users\\John-\\Projects\\Frontend\\VueProjects\\spb-alert-system\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\John-\\Projects\\Frontend\\VueProjects\\spb-alert-system\\src\\store\\modules\\placemark.js","dependencies":[{"path":"C:\\Users\\John-\\Projects\\Frontend\\VueProjects\\spb-alert-system\\src\\store\\modules\\placemark.js","mtime":1605313526947},{"path":"C:\\Users\\John-\\Projects\\Frontend\\VueProjects\\spb-alert-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\John-\\Projects\\Frontend\\VueProjects\\spb-alert-system\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZXhwb3J0IGRlZmF1bHQgewogIGFjdGlvbnM6IHsKICAgIC8vINCd0LDRgdGC0YDQvtC40YLRjCDQv9C+0LvRg9GH0LXQvdC40LUg0YEgYmFja2VuZAogICAgY2F0Y2hQbGFjZW1hcmtzOiBmdW5jdGlvbiBjYXRjaFBsYWNlbWFya3MoY29udGV4dCkgewogICAgICB2YXIgbWVzc2FnZXM7CiAgICAgIGF4aW9zLmdldCgnaHR0cHM6Ly8yOTNkYzNhODMyOTIubmdyb2suaW8vbWVzc2FnZS9nZXQvJykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICByZXR1cm4gbWVzc2FnZXMgPSByZXNwb25zZTsKICAgICAgfSk7CiAgICAgIGNvbnRleHQuY29tbWl0KCJ1cGRhdGVQbGFjZW1hcmtzT25NYXAiLCBtZXNzYWdlcyk7CiAgICB9CiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIHVwZGF0ZVBsYWNlbWFya3NPbk1hcDogZnVuY3Rpb24gdXBkYXRlUGxhY2VtYXJrc09uTWFwKHN0YXRlLCBtZXNzYWdlcykgewogICAgICAvLyDQv9GA0L7QstC10YDQuNGC0Ywg0L3QsCDRg9C90LjQutCw0LvRjNC90L7RgdGC0Ywg0L3QvtCy0YvRhSBwbGFjZW1hcmtzPwogICAgICAvLyDQoNCw0YHQv9GA0LXQtNC10LvQtdC90LjQtSDQv9C+INGG0LLQtdGC0LDQvAogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1lc3NhZ2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgc3RhdGUucGxhY2VtYXJrc1siZmVhdHVyZXMiXS5wdXNoKHsKICAgICAgICAgIHR5cGU6ICdGZWF0dXJlJywKICAgICAgICAgIGlkOiBtZXNzYWdlc1tpXVsiaWQiXSwKICAgICAgICAgIGdlb21ldHJ5OiB7CiAgICAgICAgICAgIHR5cGU6ICdQb2ludCcsCiAgICAgICAgICAgIGNvb3JkaW5hdGVzOiBbbWVzc2FnZXNbaV1bImxvbmd0aXR1ZGUiXSwgbWVzc2FnZXNbaV1bImxhdGl0dWRlIl1dCiAgICAgICAgICB9LAogICAgICAgICAgcHJvcGVydGllczogewogICAgICAgICAgICBoaW50Q29udGVudDogbWVzc2FnZXNbaV1bImRhdGV0aW1lIl0sCiAgICAgICAgICAgIGJhbGxvb25Db250ZW50OiBtZXNzYWdlc1tpXVsidGV4dCJdCiAgICAgICAgICB9LAogICAgICAgICAgb3B0aW9uczogewogICAgICAgICAgICBwcmVzZXQ6ICJpc2xhbmRzI2RvdEljb24iLAogICAgICAgICAgICBpY29uQ29sb3I6IHN0YXRlLmNsYXNzaWZpZXJbbWVzc2FnZXNbaV1bImRhbmdlcl9sZXZlbCJdXQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfSwKICBzdGF0ZTogewogICAgcGxhY2VtYXJrczogewogICAgICAidHlwZSI6ICJGZWF0dXJlQ29sbGVjdGlvbiIsCiAgICAgICJmZWF0dXJlcyI6IFt7CiAgICAgICAgdHlwZTogJ0ZlYXR1cmUnLAogICAgICAgIGlkOiAzLAogICAgICAgIGdlb21ldHJ5OiB7CiAgICAgICAgICB0eXBlOiAnUG9pbnQnLAogICAgICAgICAgY29vcmRpbmF0ZXM6IFs1OS45LCAzMC41NV0KICAgICAgICB9LAogICAgICAgIHByb3BlcnRpZXM6IHsKICAgICAgICAgIGhpbnRDb250ZW50OiAn0KHQvtC00LXRgNC20LDQvdC40LUg0LLRgdC/0LvRi9Cy0LDRjtGJ0LXQuSDQv9C+0LTRgdC60LDQt9C60LgnLAogICAgICAgICAgYmFsbG9vbkNvbnRlbnQ6ICfQodC+0LTQtdGA0LbQsNC90LjQtSDQsdCw0LvRg9C90LAnCiAgICAgICAgfSwKICAgICAgICBvcHRpb25zOiB7CiAgICAgICAgICBwcmVzZXQ6ICJpc2xhbmRzI2RvdEljb24iLAogICAgICAgICAgaWNvbkNvbG9yOiAiYmx1ZSIKICAgICAgICB9CiAgICAgIH1dCiAgICB9LAogICAgbXlNYXA6IG51bGwsCiAgICBvYmplY3RNYW5hZ2VyOiBudWxsLAogICAgbWVzc2FnZXM6IG51bGwsCiAgICBjbGFzc2lmaWVyOiB7CiAgICAgIDE6ICd5ZWxsb3cnLAogICAgICAyOiAnYmx1ZScsCiAgICAgIDM6ICdyZWQnCiAgICB9CiAgfSwKICBnZXR0ZXJzOiB7CiAgICBnZXRBbGxQbGFjZW1hcmtzOiBmdW5jdGlvbiBnZXRBbGxQbGFjZW1hcmtzKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5wbGFjZW1hcmtzWyJmZWF0dXJlcyJdOwogICAgfSwKICAgIGdldEFsbFBsYWNlbWFya3NDb3VudDogZnVuY3Rpb24gZ2V0QWxsUGxhY2VtYXJrc0NvdW50KHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5wbGFjZW1hcmtzWyJmZWF0dXJlcyJdLmxlbmd0aDsKICAgIH0KICB9Cn07"},{"version":3,"sources":["C:/Users/John-/Projects/Frontend/VueProjects/spb-alert-system/src/store/modules/placemark.js"],"names":["actions","catchPlacemarks","context","messages","axios","get","then","response","commit","mutations","updatePlacemarksOnMap","state","i","length","placemarks","push","type","id","geometry","coordinates","properties","hintContent","balloonContent","options","preset","iconColor","classifier","myMap","objectManager","getters","getAllPlacemarks","getAllPlacemarksCount"],"mappings":"AAAA,eAAc;AACZA,EAAAA,OAAO,EAAE;AACP;AACAC,IAAAA,eAFO,2BAESC,OAFT,EAEiB;AACtB,UAAIC,QAAJ;AACEC,MAAAA,KAAK,CACFC,GADH,CACO,4CADP,EAEGC,IAFH,CAEQ,UAAAC,QAAQ;AAAA,eAAKJ,QAAQ,GAAGI,QAAhB;AAAA,OAFhB;AAGFL,MAAAA,OAAO,CAACM,MAAR,CAAe,uBAAf,EAAwCL,QAAxC;AACD;AARM,GADG;AAeZM,EAAAA,SAAS,EAAE;AACTC,IAAAA,qBADS,iCACaC,KADb,EACoBR,QADpB,EAC6B;AACpC;AAEA;AACA,WAAK,IAAIS,CAAC,GAAC,CAAX,EAAaA,CAAC,GAACT,QAAQ,CAACU,MAAxB,EAA+BD,CAAC,EAAhC,EAAmC;AACjCD,QAAAA,KAAK,CAACG,UAAN,CAAiB,UAAjB,EAA6BC,IAA7B,CAAkC;AAC9BC,UAAAA,IAAI,EAAE,SADwB;AAE9BC,UAAAA,EAAE,EAAEd,QAAQ,CAACS,CAAD,CAAR,CAAY,IAAZ,CAF0B;AAG9BM,UAAAA,QAAQ,EAAE;AACNF,YAAAA,IAAI,EAAE,OADA;AAENG,YAAAA,WAAW,EAAE,CAAChB,QAAQ,CAACS,CAAD,CAAR,CAAY,YAAZ,CAAD,EAA4BT,QAAQ,CAACS,CAAD,CAAR,CAAY,UAAZ,CAA5B;AAFP,WAHoB;AAO9BQ,UAAAA,UAAU,EAAE;AACRC,YAAAA,WAAW,EAAElB,QAAQ,CAACS,CAAD,CAAR,CAAY,UAAZ,CADL;AAERU,YAAAA,cAAc,EAAEnB,QAAQ,CAACS,CAAD,CAAR,CAAY,MAAZ;AAFR,WAPkB;AAW9BW,UAAAA,OAAO,EAAE;AACLC,YAAAA,MAAM,EAAE,iBADH;AAELC,YAAAA,SAAS,EAAEd,KAAK,CAACe,UAAN,CAAiBvB,QAAQ,CAACS,CAAD,CAAR,CAAY,cAAZ,CAAjB;AAFN;AAXqB,SAAlC;AAgBC;AACJ;AAvBQ,GAfC;AA2CZD,EAAAA,KAAK,EAAE;AACHG,IAAAA,UAAU,EAAE;AACV,cAAQ,mBADE;AAEV,kBAAY,CACV;AACEE,QAAAA,IAAI,EAAE,SADR;AAEEC,QAAAA,EAAE,EAAE,CAFN;AAGEC,QAAAA,QAAQ,EAAE;AACNF,UAAAA,IAAI,EAAE,OADA;AAENG,UAAAA,WAAW,EAAE,CAAC,IAAD,EAAO,KAAP;AAFP,SAHZ;AAOEC,QAAAA,UAAU,EAAE;AACRC,UAAAA,WAAW,EAAE,kCADL;AAERC,UAAAA,cAAc,EAAE;AAFR,SAPd;AAWEC,QAAAA,OAAO,EAAE;AACLC,UAAAA,MAAM,EAAE,iBADH;AAELC,UAAAA,SAAS,EAAE;AAFN;AAXX,OADU;AAFF,KADT;AAsBHE,IAAAA,KAAK,EAAE,IAtBJ;AAuBHC,IAAAA,aAAa,EAAE,IAvBZ;AAwBHzB,IAAAA,QAAQ,EAAE,IAxBP;AAyBHuB,IAAAA,UAAU,EAAE;AACR,SAAG,QADK;AAER,SAAG,MAFK;AAGR,SAAG;AAHK;AAzBT,GA3CK;AA4EZG,EAAAA,OAAO,EAAE;AACLC,IAAAA,gBADK,4BACYnB,KADZ,EACkB;AACrB,aAAOA,KAAK,CAACG,UAAN,CAAiB,UAAjB,CAAP;AACH,KAHM;AAILiB,IAAAA,qBAJK,iCAIiBpB,KAJjB,EAIuB;AAC1B,aAAOA,KAAK,CAACG,UAAN,CAAiB,UAAjB,EAA6BD,MAApC;AACH;AANM;AA5EG,CAAd","sourcesContent":["export default{\r\n  actions: {\r\n    // Настроить получение с backend\r\n    catchPlacemarks(context){\r\n      let messages\r\n        axios\r\n          .get('https://293dc3a83292.ngrok.io/message/get/')\r\n          .then(response => (messages = response));\r\n      context.commit(\"updatePlacemarksOnMap\", messages);\r\n    }\r\n    \r\n  },\r\n\r\n\r\n\r\n  mutations: {\r\n    updatePlacemarksOnMap(state, messages){\r\n      // проверить на уникальность новых placemarks?\r\n\r\n      // Распределение по цветам\r\n      for (let i=0;i<messages.length;i++){\r\n        state.placemarks[\"features\"].push({\r\n            type: 'Feature',\r\n            id: messages[i][\"id\"],\r\n            geometry: {\r\n                type: 'Point',\r\n                coordinates: [messages[i][\"longtitude\"], messages[i][\"latitude\"]]\r\n            },\r\n            properties: {\r\n                hintContent: messages[i][\"datetime\"],\r\n                balloonContent: messages[i][\"text\"]\r\n            },\r\n            options: {\r\n                preset: \"islands#dotIcon\",\r\n                iconColor: state.classifier[messages[i][\"danger_level\"]]\r\n            }\r\n        })\r\n        }\r\n    }\r\n  },\r\n\r\n\r\n\r\n  state: {\r\n      placemarks: {\r\n        \"type\": \"FeatureCollection\",\r\n        \"features\": [\r\n          {\r\n            type: 'Feature',\r\n            id: 3,\r\n            geometry: {\r\n                type: 'Point',\r\n                coordinates: [59.9, 30.55]\r\n            },\r\n            properties: {\r\n                hintContent: 'Содержание всплывающей подсказки',\r\n                balloonContent: 'Содержание балуна'\r\n            },\r\n            options: {\r\n                preset: \"islands#dotIcon\",\r\n                iconColor: \"blue\"\r\n            }\r\n        }   \r\n        ],\r\n      },\r\n      myMap: null,\r\n      objectManager: null,\r\n      messages: null,\r\n      classifier: {\r\n          1: 'yellow',\r\n          2: 'blue',\r\n          3: 'red'\r\n      },      \r\n  },\r\n\r\n\r\n  getters: {\r\n      getAllPlacemarks(state){\r\n        return state.placemarks[\"features\"];\r\n    },\r\n      getAllPlacemarksCount(state){\r\n        return state.placemarks[\"features\"].length;\r\n    }\r\n  }\r\n}\r\n"]}]}