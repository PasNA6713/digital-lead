{"remainingRequest":"C:\\Users\\John-\\Projects\\Frontend\\VueProjects\\spb-alert-system\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\John-\\Projects\\Frontend\\VueProjects\\spb-alert-system\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\John-\\Projects\\Frontend\\VueProjects\\spb-alert-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\John-\\Projects\\Frontend\\VueProjects\\spb-alert-system\\src\\components\\Map.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\John-\\Projects\\Frontend\\VueProjects\\spb-alert-system\\src\\components\\Map.vue","mtime":1605328995947},{"path":"C:\\Users\\John-\\Projects\\Frontend\\VueProjects\\spb-alert-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\John-\\Projects\\Frontend\\VueProjects\\spb-alert-system\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\John-\\Projects\\Frontend\\VueProjects\\spb-alert-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\John-\\Projects\\Frontend\\VueProjects\\spb-alert-system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwbGFjZW1hcmtzOiB7CiAgICAgICAgInR5cGUiOiAiRmVhdHVyZUNvbGxlY3Rpb24iLAogICAgICAgICJmZWF0dXJlcyI6IFt7CiAgICAgICAgICB0eXBlOiAnRmVhdHVyZScsCiAgICAgICAgICBpZDogMywKICAgICAgICAgIGdlb21ldHJ5OiB7CiAgICAgICAgICAgIHR5cGU6ICdQb2ludCcsCiAgICAgICAgICAgIGNvb3JkaW5hdGVzOiBbNTkuOSwgMzAuNTVdCiAgICAgICAgICB9LAogICAgICAgICAgcHJvcGVydGllczogewogICAgICAgICAgICBoaW50Q29udGVudDogJ9Ch0L7QtNC10YDQttCw0L3QuNC1INCy0YHQv9C70YvQstCw0Y7RidC10Lkg0L/QvtC00YHQutCw0LfQutC4JywKICAgICAgICAgICAgYmFsbG9vbkNvbnRlbnQ6ICfQodC+0LTQtdGA0LbQsNC90LjQtSDQsdCw0LvRg9C90LAnCiAgICAgICAgICB9LAogICAgICAgICAgb3B0aW9uczogewogICAgICAgICAgICBwcmVzZXQ6ICJpc2xhbmRzI2RvdEljb24iLAogICAgICAgICAgICBpY29uQ29sb3I6ICJibHVlIgogICAgICAgICAgfQogICAgICAgIH1dCiAgICAgIH0sCiAgICAgIG15TWFwOiBudWxsLAogICAgICBvYmplY3RNYW5hZ2VyOiBudWxsLAogICAgICBtZXNzYWdlczogbnVsbCwKICAgICAgY2xhc3NpZmllcjogewogICAgICAgIDE6ICd5ZWxsb3cnLAogICAgICAgIDI6ICdibHVlJywKICAgICAgICAzOiAncmVkJwogICAgICB9LAogICAgICB0aW1lRm9yTWFwOiBmYWxzZQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHNsZWVwOiBmdW5jdGlvbiBzbGVlcChtcykgewogICAgICBtcyArPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKCiAgICAgIHdoaWxlIChuZXcgRGF0ZSgpIDwgbXMpIHt9CiAgICB9LAogICAgLy8gY29tcHV0ZWQ6IHsKICAgIC8vICAgICBoYXJkKCl7CiAgICAvLyAgICAgfQogICAgLy8gfSwKICAgIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLm1lc3NhZ2VzID0gW107CiAgICAgIGF4aW9zLmdldCgnaHR0cHM6Ly80NmM2MGE2OTY2MDkubmdyb2suaW8vbWVzc2FnZS9nZXQvJykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpcy5tZXNzYWdlcyA9IHJlc3BvbnNlOwogICAgICB9KTsKICAgICAgY29uc29sZS5sb2codGhpcy5tZXNzYWdlcy5sZW5ndGgpOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm1lc3NhZ2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc29sZS5sb2coImNpcmNsZSIpOwogICAgICAgIHRoaXMucGxhY2VtYXJrc1siZmVhdHVyZXMiXS5wdXNoKHsKICAgICAgICAgIHR5cGU6ICdGZWF0dXJlJywKICAgICAgICAgIGlkOiB0aGlzLm1lc3NhZ2VzWyJkYXRhIl1baV1bImlkIl0sCiAgICAgICAgICBnZW9tZXRyeTogewogICAgICAgICAgICB0eXBlOiAnUG9pbnQnLAogICAgICAgICAgICBjb29yZGluYXRlczogW3RoaXMubWVzc2FnZXNbImRhdGEiXVtpXVsiYWRkcmVzcyJdWyJsb25ndGl0dWRlIl0sIHRoaXMubWVzc2FnZXNbImRhdGEiXVtpXVsiYWRkcmVzcyJdWyJsYXRpdHVkZSJdXQogICAgICAgICAgfSwKICAgICAgICAgIHByb3BlcnRpZXM6IHsKICAgICAgICAgICAgaGludENvbnRlbnQ6IHRoaXMubWVzc2FnZXNbImRhdGEiXVtpXVsiZGF0ZSJdLAogICAgICAgICAgICBiYWxsb29uQ29udGVudDogdGhpcy5tZXNzYWdlc1siZGF0YSJdW2ldWyJ0ZXh0Il0KICAgICAgICAgIH0sCiAgICAgICAgICBvcHRpb25zOiB7CiAgICAgICAgICAgIHByZXNldDogImlzbGFuZHMjZG90SWNvbiIsCiAgICAgICAgICAgIGljb25Db2xvcjogdGhpcy5jbGFzc2lmaWVyW3RoaXMubWVzc2FnZXNbImRhdGEiXVtpXVsiZGFuZ2VyX2xldmVsIl1dCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGNvbnNvbGUubG9nKCJ5bSIpOwogICAgICB5bWFwcy5yZWFkeShmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMubXlNYXAgPSBuZXcgeW1hcHMuTWFwKCJtYXAiLCB7CiAgICAgICAgICBjZW50ZXI6IFs1OS45MzcwLCAzMC4zMDg5XSwKICAgICAgICAgIHpvb206IDEwLAogICAgICAgICAgY29udHJvbHM6IFsnem9vbUNvbnRyb2wnXSwKICAgICAgICAgIGJlaGF2aW9yczogWydkcmFnJywgJ3Njcm9sbFpvb20nXQogICAgICAgIH0sIHsKICAgICAgICAgIHNlYXJjaENvbnRyb2xQcm92aWRlcjogJ3lhbmRleCNzZWFyY2gnCiAgICAgICAgfSk7CiAgICAgICAgX3RoaXMub2JqZWN0TWFuYWdlciA9IG5ldyB5bWFwcy5PYmplY3RNYW5hZ2VyKHsKICAgICAgICAgIGNsdXN0ZXJpemU6IHRydWUsCiAgICAgICAgICBncmlkU2l6ZTogMzIsCiAgICAgICAgICBjbHVzdGVyRGlzYWJsZUNsaWNrWm9vbTogdHJ1ZQogICAgICAgIH0pOwoKICAgICAgICBfdGhpcy5vYmplY3RNYW5hZ2VyLmNsdXN0ZXJzLm9wdGlvbnMuc2V0KCdwcmVzZXQnLCAnaXNsYW5kcyNyZWRDbHVzdGVySWNvbnMnKTsKCiAgICAgICAgX3RoaXMub2JqZWN0TWFuYWdlci5hZGQoX3RoaXMucGxhY2VtYXJrcyk7CgogICAgICAgIF90aGlzLm15TWFwLmdlb09iamVjdHMuYWRkKF90aGlzLm9iamVjdE1hbmFnZXIpOwoKICAgICAgICBfdGhpcy5teU1hcC5nZW9PYmplY3RzLmV2ZW50cy5hZGQoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHZhciB0YXJnZXQgPSBlLmdldCgnb2JqZWN0SWQnKTsKICAgICAgICAgIHZhciBjbHVzdGVyID0gdGhpcy5vYmplY3RNYW5hZ2VyLmNsdXN0ZXJzLmdldEJ5SWQodGFyZ2V0KTsKCiAgICAgICAgICBpZiAoY2x1c3RlcikgewogICAgICAgICAgICB2YXIgb2JqZWN0cyA9IGNsdXN0ZXIucHJvcGVydGllcy5nZW9PYmplY3RzOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["Map.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div>\r\n        <br>\r\n        <div class=\"border primary-border\" id=\"map\"></div>\r\n        <br>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default{\r\n        data: () => ({\r\n            placemarks: {\r\n                \"type\": \"FeatureCollection\",\r\n                \"features\": [\r\n                    {\r\n                        type: 'Feature',\r\n                        id: 3,\r\n                        geometry: {\r\n                            type: 'Point',\r\n                            coordinates: [59.9, 30.55]\r\n                        },\r\n                        properties: {\r\n                            hintContent: 'Содержание всплывающей подсказки',\r\n                            balloonContent: 'Содержание балуна'\r\n                        },\r\n                        options: {\r\n                            preset: \"islands#dotIcon\",\r\n                            iconColor: \"blue\"\r\n                        }\r\n                    }   \r\n                ],\r\n            },\r\n            myMap: null,\r\n            objectManager: null,\r\n\r\n            messages: null,\r\n            classifier: {\r\n                1: 'yellow',\r\n                2: 'blue',\r\n                3: 'red'\r\n            },\r\n            timeForMap: false\r\n            }),\r\n        methods: {\r\n            sleep(ms) {\r\n                ms += new Date().getTime();\r\n                while (new Date() < ms){}\r\n            },\r\n\r\n        // computed: {\r\n        //     hard(){\r\n        //     }\r\n        // },\r\n        created() {\r\n            this.messages = []\r\n            axios\r\n          .get('https://46c60a696609.ngrok.io/message/get/')\r\n          .then((response) => {this.messages = response});\r\n\r\n            console.log(this.messages.length)\r\n        for (let i=0;i<this.messages.length;i++){\r\n            console.log(\"circle\")\r\n            this.placemarks[\"features\"].push({\r\n            type: 'Feature',\r\n            id: this.messages[\"data\"][i][\"id\"],\r\n            geometry: {\r\n                type: 'Point',\r\n                coordinates: [this.messages[\"data\"][i][\"address\"][\"longtitude\"], this.messages[\"data\"][i][\"address\"][\"latitude\"]]\r\n            },\r\n            properties: {\r\n                hintContent: this.messages[\"data\"][i][\"date\"],\r\n                balloonContent: this.messages[\"data\"][i][\"text\"]\r\n            },\r\n            options: {\r\n                preset: \"islands#dotIcon\",\r\n                iconColor: this.classifier[this.messages[\"data\"][i][\"danger_level\"]]\r\n            }\r\n        })\r\n        }\r\n            console.log(\"ym\")\r\n            ymaps.ready(() => {\r\n                this.myMap = new ymaps.Map(\"map\", {\r\n                    center: [59.9370, 30.3089],\r\n                    zoom: 10,\r\n                    controls: ['zoomControl'], \r\n                    behaviors: ['drag', 'scrollZoom']\r\n                }, {\r\n                    searchControlProvider: 'yandex#search'\r\n                })\r\n\r\n                this.objectManager = new ymaps.ObjectManager({\r\n                    clusterize: true,\r\n                    gridSize: 32,\r\n                    clusterDisableClickZoom: true\r\n                })\r\n                \r\n                this.objectManager.clusters.options.set('preset', 'islands#redClusterIcons')\r\n                this.objectManager.add(this.placemarks)\r\n\r\n\r\n                this.myMap.geoObjects.add(this.objectManager)\r\n\r\n\r\n                this.myMap.geoObjects.events.add('click', function (e) {\r\n                    let target = e.get('objectId');\r\n\r\n                    const cluster = this.objectManager.clusters.getById(target)\r\n                    if (cluster) {\r\n                        const objects = cluster.properties.geoObjects\r\n                    }\r\n                })\r\n            })\r\n        \r\n        }\r\n}\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n#map{\r\n    width: 800px; \r\n    height: 600px;\r\n    margin-left: 50px;\r\n}\r\n</style>"],"sourceRoot":"src/components"}]}