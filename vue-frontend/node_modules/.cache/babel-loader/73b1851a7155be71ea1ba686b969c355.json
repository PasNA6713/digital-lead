{"remainingRequest":"C:\\Users\\John-\\Projects\\Frontend\\VueProjects\\spb-alert-system\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\John-\\Projects\\Frontend\\VueProjects\\spb-alert-system\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\John-\\Projects\\Frontend\\VueProjects\\spb-alert-system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\John-\\Projects\\Frontend\\VueProjects\\spb-alert-system\\src\\components\\Map.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\John-\\Projects\\Frontend\\VueProjects\\spb-alert-system\\src\\components\\Map.vue","mtime":1605341472851},{"path":"C:\\Users\\John-\\Projects\\Frontend\\VueProjects\\spb-alert-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\John-\\Projects\\Frontend\\VueProjects\\spb-alert-system\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\John-\\Projects\\Frontend\\VueProjects\\spb-alert-system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\John-\\Projects\\Frontend\\VueProjects\\spb-alert-system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovVXNlcnMvSm9obi0vUHJvamVjdHMvRnJvbnRlbmQvVnVlUHJvamVjdHMvc3BiLWFsZXJ0LXN5c3RlbS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IG1hcEdldHRlcnMsIG1hcE11dGF0aW9ucyB9IGZyb20gJ3Z1ZXgnOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHBsYWNlbWFya3M6IHsKICAgICAgICAidHlwZSI6ICJGZWF0dXJlQ29sbGVjdGlvbiIsCiAgICAgICAgImZlYXR1cmVzIjogW3sKICAgICAgICAgIHR5cGU6ICdGZWF0dXJlJywKICAgICAgICAgIGlkOiAzLAogICAgICAgICAgZ2VvbWV0cnk6IHsKICAgICAgICAgICAgdHlwZTogJ1BvaW50JywKICAgICAgICAgICAgY29vcmRpbmF0ZXM6IFs1OS45LCAzMC41NV0KICAgICAgICAgIH0sCiAgICAgICAgICBwcm9wZXJ0aWVzOiB7CiAgICAgICAgICAgIGhpbnRDb250ZW50OiAn0KHQvtC00LXRgNC20LDQvdC40LUg0LLRgdC/0LvRi9Cy0LDRjtGJ0LXQuSDQv9C+0LTRgdC60LDQt9C60LgnLAogICAgICAgICAgICBiYWxsb29uQ29udGVudDogJ9Ch0L7QtNC10YDQttCw0L3QuNC1INCx0LDQu9GD0L3QsCcKICAgICAgICAgIH0sCiAgICAgICAgICBvcHRpb25zOiB7CiAgICAgICAgICAgIHByZXNldDogImlzbGFuZHMjZG90SWNvbiIsCiAgICAgICAgICAgIGljb25Db2xvcjogImJsdWUiCiAgICAgICAgICB9CiAgICAgICAgfV0KICAgICAgfSwKICAgICAgbXlNYXA6IG51bGwsCiAgICAgIG9iamVjdE1hbmFnZXI6IG51bGwsCiAgICAgIG1lc3NhZ2VzOiBudWxsLAogICAgICBjbGFzc2lmaWVyOiB7CiAgICAgICAgMTogJ3llbGxvdycsCiAgICAgICAgMjogJ2JsdWUnLAogICAgICAgIDM6ICdyZWQnCiAgICAgIH0KICAgIH07CiAgfSwKICBtZXRob2RzOiBfb2JqZWN0U3ByZWFkKHt9LCBtYXBNdXRhdGlvbnMoWyJ1cGRhdGVNZXNzYWdlcyJdKSksCiAgY29tcHV0ZWQ6IHt9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIGF4aW9zLmdldCgnaHR0cHM6Ly80NmM2MGE2OTY2MDkubmdyb2suaW8vbWVzc2FnZS9nZXQvP2Rhbmdlcj0xJykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgX3RoaXMubWVzc2FnZXMgPSByZXNwb25zZS5kYXRhWyJkYXRhIl07CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IF90aGlzLm1lc3NhZ2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgX3RoaXMucGxhY2VtYXJrc1siZmVhdHVyZXMiXS5wdXNoKHsKICAgICAgICAgIHR5cGU6ICdGZWF0dXJlJywKICAgICAgICAgIGlkOiBfdGhpcy5tZXNzYWdlc1tpXVsiaWQiXSwKICAgICAgICAgIGdlb21ldHJ5OiB7CiAgICAgICAgICAgIHR5cGU6ICdQb2ludCcsCiAgICAgICAgICAgIGNvb3JkaW5hdGVzOiBbX3RoaXMubWVzc2FnZXNbaV1bImFkZHJlc3MiXVsibGF0aXR1ZGUiXSwgX3RoaXMubWVzc2FnZXNbaV1bImFkZHJlc3MiXVsibG9uZ3RpdHVkZSJdXQogICAgICAgICAgfSwKICAgICAgICAgIHByb3BlcnRpZXM6IHsKICAgICAgICAgICAgaGludENvbnRlbnQ6IF90aGlzLm1lc3NhZ2VzW2ldWyJkYXRlIl0sCiAgICAgICAgICAgIGJhbGxvb25Db250ZW50OiBfdGhpcy5tZXNzYWdlc1tpXVsidGV4dCJdCiAgICAgICAgICB9LAogICAgICAgICAgb3B0aW9uczogewogICAgICAgICAgICBwcmVzZXQ6ICJpc2xhbmRzI2RvdEljb24iLAogICAgICAgICAgICBpY29uQ29sb3I6IF90aGlzLmNsYXNzaWZpZXJbX3RoaXMubWVzc2FnZXNbaV1bImRhbmdlcl9sZXZlbCJdXQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CgogICAgICBfdGhpcy51cGRhdGVNZXNzYWdlcyhfdGhpcy5tZXNzYWdlcyk7CgogICAgICB5bWFwcy5yZWFkeShmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMubXlNYXAgPSBuZXcgeW1hcHMuTWFwKCJtYXAiLCB7CiAgICAgICAgICBjZW50ZXI6IFs1OS45MzcwLCAzMC4zMDg5XSwKICAgICAgICAgIHpvb206IDEwLAogICAgICAgICAgY29udHJvbHM6IFsnem9vbUNvbnRyb2wnXSwKICAgICAgICAgIGJlaGF2aW9yczogWydkcmFnJywgJ3Njcm9sbFpvb20nXQogICAgICAgIH0sIHsKICAgICAgICAgIHNlYXJjaENvbnRyb2xQcm92aWRlcjogJ3lhbmRleCNzZWFyY2gnCiAgICAgICAgfSk7CiAgICAgICAgX3RoaXMub2JqZWN0TWFuYWdlciA9IG5ldyB5bWFwcy5PYmplY3RNYW5hZ2VyKHsKICAgICAgICAgIGNsdXN0ZXJpemU6IHRydWUsCiAgICAgICAgICBncmlkU2l6ZTogMzIsCiAgICAgICAgICBjbHVzdGVyRGlzYWJsZUNsaWNrWm9vbTogdHJ1ZQogICAgICAgIH0pOwoKICAgICAgICBfdGhpcy5vYmplY3RNYW5hZ2VyLmNsdXN0ZXJzLm9wdGlvbnMuc2V0KCdwcmVzZXQnLCAnaXNsYW5kcyNyZWRDbHVzdGVySWNvbnMnKTsKCiAgICAgICAgX3RoaXMub2JqZWN0TWFuYWdlci5hZGQoX3RoaXMucGxhY2VtYXJrcyk7CgogICAgICAgIF90aGlzLm15TWFwLmdlb09iamVjdHMuYWRkKF90aGlzLm9iamVjdE1hbmFnZXIpOwoKICAgICAgICBfdGhpcy5teU1hcC5nZW9PYmplY3RzLmV2ZW50cy5hZGQoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHZhciB0YXJnZXQgPSBlLmdldCgnb2JqZWN0SWQnKTsKICAgICAgICAgIHZhciBjbHVzdGVyID0gdGhpcy5vYmplY3RNYW5hZ2VyLmNsdXN0ZXJzLmdldEJ5SWQodGFyZ2V0KTsKCiAgICAgICAgICBpZiAoY2x1c3RlcikgewogICAgICAgICAgICB2YXIgb2JqZWN0cyA9IGNsdXN0ZXIucHJvcGVydGllcy5nZW9PYmplY3RzOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0pOwogIH0KfTs="},{"version":3,"sources":["Map.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div>\r\n        <br>\r\n        <div class=\"border primary-border\" id=\"map\"></div>\r\n        <br>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapGetters, mapMutations} from 'vuex'\r\n\r\n    export default{\r\n        data: () => ({\r\n            placemarks: {\r\n                \"type\": \"FeatureCollection\",\r\n                \"features\": [\r\n                    {\r\n                        type: 'Feature',\r\n                        id: 3,\r\n                        geometry: {\r\n                            type: 'Point',\r\n                            coordinates: [59.9, 30.55]\r\n                        },\r\n                        properties: {\r\n                            hintContent: 'Содержание всплывающей подсказки',\r\n                            balloonContent: 'Содержание балуна'\r\n                        },\r\n                        options: {\r\n                            preset: \"islands#dotIcon\",\r\n                            iconColor: \"blue\"\r\n                        }\r\n                    }   \r\n                ],\r\n            },\r\n            myMap: null,\r\n            objectManager: null,\r\n\r\n            messages: null,\r\n            classifier: {\r\n                1: 'yellow',\r\n                2: 'blue',\r\n                3: 'red'\r\n            }\r\n            }),\r\n              methods: {\r\n            ...mapMutations([\"updateMessages\"])\r\n        },\r\n        computed:{\r\n            \r\n        },\r\n\r\n        created() {\r\n            axios\r\n          .get('https://46c60a696609.ngrok.io/message/get/?danger=1')\r\n          .then((response) => {\r\n              this.messages = response.data[\"data\"]\r\n                for (let i=0;i<this.messages.length;i++){\r\n            this.placemarks[\"features\"].push({\r\n\r\n            type: 'Feature',\r\n            id: this.messages[i][\"id\"],\r\n            geometry: {\r\n                type: 'Point',\r\n                coordinates: [this.messages[i][\"address\"][\"latitude\"], this.messages[i][\"address\"][\"longtitude\"]]\r\n            },\r\n            properties: {\r\n                hintContent: this.messages[i][\"date\"],\r\n                balloonContent: this.messages[i][\"text\"]\r\n            },\r\n            options: {\r\n                preset: \"islands#dotIcon\",\r\n                iconColor: this.classifier[this.messages[i][\"danger_level\"]]\r\n            }\r\n        })\r\n\r\n\r\n        }\r\n            this.updateMessages(this.messages)\r\n\r\n            ymaps.ready(() => {\r\n                this.myMap = new ymaps.Map(\"map\", {\r\n                    center: [59.9370, 30.3089],\r\n                    zoom: 10,\r\n                    controls: ['zoomControl'], \r\n                    behaviors: ['drag', 'scrollZoom']\r\n                }, {\r\n                    searchControlProvider: 'yandex#search'\r\n                })\r\n\r\n                this.objectManager = new ymaps.ObjectManager({\r\n                    clusterize: true,\r\n                    gridSize: 32,\r\n                    clusterDisableClickZoom: true\r\n                })\r\n                \r\n                this.objectManager.clusters.options.set('preset', 'islands#redClusterIcons')\r\n                this.objectManager.add(this.placemarks)\r\n\r\n                this.myMap.geoObjects.add(this.objectManager)\r\n\r\n\r\n                this.myMap.geoObjects.events.add('click', function (e) {\r\n                    let target = e.get('objectId');\r\n                    const cluster = this.objectManager.clusters.getById(target)\r\n                    if (cluster) {\r\n                        const objects = cluster.properties.geoObjects\r\n                    }\r\n                })\r\n            })\r\n        })\r\n        }\r\n        \r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n#map{\r\n    width: 800px; \r\n    height: 660px;\r\n    margin-left: 30px;\r\n}\r\n</style>"],"sourceRoot":"src/components"}]}